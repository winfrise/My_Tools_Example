<!DOCTYPE html>
<html>
<head><meta charset="utf-8"><title>1. 油墨不均</title></head>
<body style="background:#f5f5f5; padding:20px; font-family:sans-serif">
<h3>油墨不均：印泥涂抹不匀，深浅斑驳</h3>
<canvas id="canvas" width="400" height="400" style="border:1px solid #ccc; background:white"></canvas>
<script>
function drawSeal(ctx, cx, cy, r) {
  ctx.strokeStyle = '#C00000';
  ctx.fillStyle = '#C00000';
  ctx.lineWidth = 2;
  ctx.beginPath(); ctx.arc(cx, cy, r, 0, Math.PI*2); ctx.stroke();
  ctx.lineWidth = 1;
  ctx.beginPath(); ctx.arc(cx, cy, r*0.55, 0, Math.PI*2); ctx.stroke();
  ctx.textAlign = 'center'; ctx.textBaseline = 'middle';
  ctx.font = `bold ${r*0.16}px "FangSong", "STFangsong", serif`;
  ctx.fillText('某某科技有限公司', cx, cy - r*0.15);
  // 五角星
  ctx.save();
  ctx.translate(cx, cy + r*0.2);
  ctx.beginPath();
  for (let i=0; i<5; i++) {
    let a = Math.PI/2 + i*Math.PI*2/5;
    let x = Math.cos(a)*r*0.12, y = -Math.sin(a)*r*0.12;
    if(i===0) ctx.moveTo(x,y);
    else ctx.lineTo(x,y);
    a += Math.PI/5;
    x = Math.cos(a)*r*0.12*0.4; y = -Math.sin(a)*r*0.12*0.4;
    ctx.lineTo(x,y);
  }
  ctx.closePath(); ctx.fill(); ctx.restore();
}

const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const cx = 200, cy = 200, r = 150;

// 先画清晰印章到离屏 canvas
const offscreen = document.createElement('canvas');
offscreen.width = canvas.width; offscreen.height = canvas.height;
const offCtx = offscreen.getContext('2d');
drawSeal(offCtx, cx, cy, r);

// 应用油墨不均：对红色像素叠加随机透明度
const imgData = offCtx.getImageData(0,0,canvas.width,canvas.height);
const d = imgData.data;
for(let i=0; i<d.length; i+=4) {
  if(d[i] > 150 && d[i+1] < 50 && d[i+2] < 50) { // 红色区域
    const noise = 0.4 + Math.random() * 0.6; // 40%～100% 不透明
    d[i+3] = d[i+3] * noise; // 修改 alpha
  }
}
offCtx.putImageData(imgData, 0, 0);
ctx.drawImage(offscreen, 0, 0);
</script>
</body>
</html>