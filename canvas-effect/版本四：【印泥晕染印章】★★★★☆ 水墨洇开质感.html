<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Canvas 印泥晕染 柔边空心印章圆 (水墨国风)</title>
  <style>canvas { border: 1px solid #eee; background: #fff; }</style>
</head>
<body>
<canvas id="canvas" width="400" height="400"></canvas>
<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
const centerX = 200, centerY = 200;
const radius = 150;
const lineWidth = 9;
const roughness = 1.2;
const sealColor = '#bc2d21';
const density = 0.012;

// 柔化晕边路径
ctx.beginPath();
for (let angle = 0; angle < Math.PI * 2; angle += density) {
  const randomOffset = (Math.random() - 0.5) * roughness * 0.7;
  const r = radius + randomOffset;
  const x = centerX + Math.cos(angle) * r;
  const y = centerY + Math.sin(angle) * r;
  angle ===0 ? ctx.moveTo(x,y) : ctx.lineTo(x,y);
}
ctx.closePath();

// ✅ 核心：晕染渐变描边，模拟印泥洇开
const gradient = ctx.createRadialGradient(centerX,centerY,radius-2,centerX,centerY,radius+2);
gradient.addColorStop(0, sealColor);
gradient.addColorStop(1, 'rgba(188,45,33,0.6)');
ctx.lineWidth = lineWidth;
ctx.strokeStyle = gradient;
ctx.lineCap = 'round';
ctx.stroke();

// 晕染纹理叠加
ctx.globalCompositeOperation = 'soft-light';
ctx.globalAlpha = 0.7;
ctx.strokeStyle = createInkTexture();
ctx.stroke();
ctx.globalAlpha =1;
ctx.globalCompositeOperation = 'source-over';

// 水墨晕染纹理函数
function createInkTexture() {
  const texCanvas = document.createElement('canvas');
  texCanvas.width=14;texCanvas.height=14;
  const texCtx = texCanvas.getContext('2d');
  texCtx.fillStyle='rgba(0,0,0,0)';texCtx.fillRect(0,0,14,14);
  for(let i=0;i<30;i++){
    const x=Math.random()*14,y=Math.random()*14;
    const size = Math.random()*1 + 0.1;
    texCtx.fillStyle = Math.random()>0.7 ? '#9d2419' : sealColor;
    texCtx.fillRect(x,y,size,size);
  }
  return ctx.createPattern(texCanvas, 'repeat');
}
</script>
</body>
</html>